import{d as f,r as v}from"./index-ffCe8qSf.js";import{i as t}from"./indexedDBService-9HYV5ySC.js";const o="sections",p=f("sectionStore",()=>{const r=v([]);async function l(){try{const e=await t.getAll(o);r.value=n(e)}catch(e){console.error("❌ فشل تحميل الأقسام:",e)}}async function s(e){try{await t.put(o,e),r.value.push(e),r.value=n(r.value)}catch(a){console.error("❌ فشل إضافة القسم:",a)}}async function i(e){try{await t.put(o,e);const a=r.value.findIndex(c=>c.id===e.id);a!==-1&&(r.value[a]=e,r.value=n(r.value))}catch(a){console.error("❌ فشل تعديل القسم:",a)}}async function u(e){try{await t.delete(o,e),r.value=r.value.filter(a=>a.id!==e)}catch(a){console.error("❌ فشل حذف القسم:",a)}}async function d(){try{await t.clear(o),r.value=[]}catch(e){console.error("❌ فشل مسح الأقسام:",e)}}function n(e){return[...e].sort((a,c)=>a.name.localeCompare(c.name,"ar"))}return{sections:r,load:l,add:s,update:i,remove:u,clear:d}});export{p as u};
