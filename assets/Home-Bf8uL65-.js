import{d as H,r as s,a as f,c as r,b as o,t as w,u as g,o as d,_ as h,e as _,f as $,w as R,v as E}from"./index-ffCe8qSf.js";import{i as c}from"./indexedDBService-9HYV5ySC.js";const I=H("homeStore",()=>{const m=s("عبدالله"),e=s(null),n=s(null),l=s([]),p=s(!0),v=s(0),y=s(0),S=s("غير محدد"),u=s(""),a=s(null),i=s(null);async function C(){const t=await c.get("settings","menuId");t?e.value=t.value:(e.value="MENU-"+Math.floor(1e5+Math.random()*9e5),await c.put("settings",{id:"menuId",value:e.value}));const b=await c.get("settings","restaurantName");b&&(u.value=b.value);const N=await c.get("settings","logoUrl");N&&(a.value=N.value)}async function L(t){i.value=t,a.value=URL.createObjectURL(t),await c.put("settings",{id:"logoUrl",value:a.value})}async function k(t){a.value=t,await c.put("settings",{id:"logoUrl",value:t})}async function x(t){u.value=t,await c.put("settings",{id:"restaurantName",value:t})}function B(){n.value=new Date().toISOString()}function M(t){l.value.push(`${new Date().toISOString()} - ${t}`)}function D(){p.value=!p.value}function V({products:t,categories:b}){v.value=t,y.value=b,S.value=new Date().toLocaleString("ar-EG")}return{username:m,menuId:e,lastVisit:n,activityLog:l,showTips:p,productCount:v,categoryCount:y,lastUpdated:S,restaurantName:u,logoUrl:a,logoBlob:i,initStore:C,setRestaurantName:x,setLogoUrl:k,setLogoBlob:L,markVisit:B,logActivity:M,toggleTips:D,updateStats:V}}),F={class:"welcome-message"},O={class:"menu-id"},T=f({__name:"WelcomeMessage",setup(m){const e=I();return e.initStore(),e.markVisit(),(n,l)=>(d(),r("div",F,[o("h2",null,"مرحبًا بك يا "+w(g(e).username)+" 👋",1),o("p",O,"معرّف المنيو: "+w(g(e).menuId),1)]))}}),W=h(T,[["__scopeId","data-v-05b1f28e"]]),j={class:"card"},A=f({__name:"SummaryCard",props:{title:{},value:{}},setup(m){return(e,n)=>(d(),r("div",j,[o("h3",null,w(e.title),1),o("p",null,w(e.value),1)]))}}),U=h(A,[["__scopeId","data-v-b83cb190"]]),G={class:"summary-cards"},q=f({__name:"HomeSummary",setup(m){const e=I();return(n,l)=>(d(),r("div",G,[_(U,{title:"📋 المنتجات",value:g(e).productCount+" منتج"},null,8,["value"]),_(U,{title:"📁 الأقسام",value:g(e).categoryCount+" قسم"},null,8,["value"]),_(U,{title:"🕒 آخر تعديل",value:g(e).lastUpdated},null,8,["value"])]))}}),z=h(q,[["__scopeId","data-v-0427808d"]]),J={class:"identity-form"},K={class:"field"},P={class:"field logo-field"},Q={key:1,class:"logo-preview-container"},X=["src"],Y=f({__name:"IdentityForm",setup(m){const e=I(),n=$({get:()=>e.restaurantName,set:u=>e.setRestaurantName(u)}),l=$(()=>e.logoUrl),p=s(null);function v(u){const i=u.target.files?.[0];i&&e.setLogoBlob(i)}function y(){p.value?.click()}function S(){e.setLogoUrl(null)}return(u,a)=>(d(),r("div",J,[o("div",K,[a[1]||(a[1]=o("label",{for:"restaurantName"},"اسم المنشأة التجاري:",-1)),R(o("input",{id:"restaurantName","onUpdate:modelValue":a[0]||(a[0]=i=>n.value=i),type:"text",placeholder:"مثلاً: كوفي طارق"},null,512),[[E,n.value]])]),o("div",P,[a[2]||(a[2]=o("label",null,"الشعار:",-1)),l.value?(d(),r("div",Q,[o("img",{src:l.value,alt:"شعار المطعم",class:"logo-preview"},null,8,X),o("div",{class:"logo-actions"},[o("button",{type:"button",onClick:y},"تغيير الشعار"),o("button",{type:"button",class:"remove-btn",onClick:S},"إزالة الشعار")]),o("input",{ref_key:"fileInput",ref:p,type:"file",accept:"image/*",class:"hidden-input",onChange:v},null,544)])):(d(),r("input",{key:0,type:"file",accept:"image/*",onChange:v},null,32))])]))}}),Z=h(Y,[["__scopeId","data-v-b9fd1fdb"]]),ee={class:"page-wrapper"},te={class:"home-dashboard"},oe=f({__name:"Home",setup(m){return I().initStore(),(n,l)=>(d(),r("div",ee,[o("div",te,[_(W),_(Z),_(z)])]))}}),ne=h(oe,[["__scopeId","data-v-88adff9b"]]);export{ne as default};
