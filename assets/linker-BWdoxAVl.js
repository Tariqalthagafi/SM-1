import{u as h}from"./products-Bey8BMUQ.js";import{u as S}from"./offers-BDDfGzaC.js";import{u as k}from"./sections-pq2AS_Pn.js";import{a as _,c as i,b as t,F as $,p as V,u as b,t as v,o as a,_ as P,f as B,r as m,e as g,w as y,v as C,U as x,l as U,q as E}from"./index-ffCe8qSf.js";import"./indexedDBService-9HYV5ySC.js";const M={class:"section-selector"},N=["value","disabled"],D=["value"],F=_({__name:"SectionSelector",props:{selectedId:{},disabled:{type:Boolean}},emits:["select"],setup(p,{emit:s}){const o=s,r=k();function u(n){const l=n.target.value;o("select",l)}return(n,l)=>(a(),i("div",M,[t("select",{value:n.selectedId,onChange:u,disabled:n.disabled},[l[0]||(l[0]=t("option",{value:""},"Ø¨Ø¯ÙˆÙ† Ù‚Ø³Ù…",-1)),(a(!0),i($,null,V(b(r).sections,d=>(a(),i("option",{key:d.id,value:d.id},v(d.name),9,D))),128))],40,N)]))}}),R=P(F,[["__scopeId","data-v-a60f4a18"]]),T=["value"],q=["value"],L=_({__name:"OfferSelector",props:{modelValue:{}},emits:["update:modelValue"],setup(p,{emit:s}){const o=s,r=S().offers;function u(n){const l=n.target.value;o("update:modelValue",l)}return(n,l)=>(a(),i("select",{value:n.modelValue,onChange:u},[l[0]||(l[0]=t("option",{value:""},"Ø¨Ø¯ÙˆÙ† Ø¹Ø±Ø¶",-1)),(a(!0),i($,null,V(b(r),d=>(a(),i("option",{key:d.id,value:d.id},v(d.title),9,q))),128))],40,T))}}),j=P(L,[["__scopeId","data-v-e6919f2b"]]),z=_({__name:"PricePreview",props:{basePrice:{},offerId:{}},setup(p){const s=p,o=S(),r=B(()=>{const u=o.offers.find(n=>n.id===s.offerId);return u?o.calculatePrice(s.basePrice||0,u):s.basePrice||0});return(u,n)=>(a(),i("span",null,v(r.value)+" Ø±ÙŠØ§Ù„",1))}}),A={class:"product-section-row"},G={class:"field"},H={class:"field"},J={class:"field"},K=["disabled"],Q={class:"field"},W={class:"field"},X={class:"field"},Y=["disabled"],Z={class:"actions"},ee=_({__name:"ProductlinkerRow",props:{product:{}},setup(p){const s=p,o=m(!1),r=h(),u=k(),n=S(),l=m(s.product.basePrice??0),d=m(s.product.selectedOfferId??""),I=m(s.product.status??"visible");function O(c){const e=u.sections.find(f=>f.id===c);r.updateProduct(s.product.id,{sectionId:c,sectionName:e?.name??""})}function w(){if(o.value){const c=n.offers.find(e=>e.id===d.value);r.updateProduct(s.product.id,{basePrice:l.value,selectedOfferId:d.value||void 0,selectedOfferTitle:c?.title||"",status:I.value})}o.value=!o.value}return(c,e)=>(a(),i("div",A,[t("div",G,[e[3]||(e[3]=t("label",null,"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",-1)),t("strong",null,v(c.product.name),1)]),t("div",H,[e[4]||(e[4]=t("label",null,"Ø§Ù„Ù‚Ø³Ù…",-1)),g(R,{selectedId:c.product.sectionId??"",onSelect:O,disabled:!o.value},null,8,["selectedId","disabled"])]),t("div",J,[e[5]||(e[5]=t("label",null,"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:",-1)),y(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=f=>l.value=f),disabled:!o.value,min:"0"},null,8,K),[[C,l.value,void 0,{number:!0}]])]),t("div",Q,[e[6]||(e[6]=t("label",null,"Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø·Ø¨Ù‚:",-1)),g(j,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=f=>d.value=f),disabled:!o.value},null,8,["modelValue","disabled"])]),t("div",W,[e[7]||(e[7]=t("label",null,"Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ø±Ø¶:",-1)),g(z,{basePrice:l.value||0,offerId:d.value??""},null,8,["basePrice","offerId"])]),t("div",X,[e[9]||(e[9]=t("label",null,"Ø§Ù„Ø­Ø§Ù„Ø©:",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=f=>I.value=f),disabled:!o.value},e[8]||(e[8]=[t("option",{value:"visible"},"Ø¸Ø§Ù‡Ø±",-1),t("option",{value:"hidden"},"Ù…Ø®ÙÙŠ",-1),t("option",{value:"expired"},"Ù…Ù†ØªÙ‡ÙŠ",-1)]),8,Y),[[x,I.value]])]),t("div",Z,[t("button",{onClick:w},v(o.value?"ðŸ’¾ Ø­ÙØ¸":"âœï¸ ØªØ¹Ø¯ÙŠÙ„"),1)])]))}}),te=P(ee,[["__scopeId","data-v-25ff8a6c"]]),se={class:"linker-page"},oe={key:0},le={key:1,class:"empty-state"},ne=_({__name:"linker",setup(p){const s=h(),o=S(),r=k();return U(()=>{Promise.all([o.load(),r.load(),s.load()])}),(u,n)=>(a(),i("div",se,[n[0]||(n[0]=t("h2",null,"ðŸ”— Ø±Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ø£Ù‚Ø³Ø§Ù…",-1)),b(s).products.length?(a(),i("div",oe,[(a(!0),i($,null,V(b(s).products,l=>(a(),E(te,{key:l.id,product:l},null,8,["product"]))),128))])):(a(),i("div",le," Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù„Ø¹Ø±Ø¶Ù‡Ø§. "))]))}}),ce=P(ne,[["__scopeId","data-v-f56cdb7d"]]);export{ce as default};
