import{d as v,r as y}from"./index-ffCe8qSf.js";import{i as n}from"./indexedDBService-9HYV5ySC.js";const a="offers",w=v("offersStore",()=>{const i=y([]);function u(){return{id:"",title:"",type:"percentage",discount:0,startDate:"",endDate:"",startTime:"",endTime:"",isActive:!0}}async function r(){i.value=await n.getAll(a)}async function c(t){await n.put(a,t),await r()}async function f(t,e){await n.put(a,{...e,id:t}),await r()}async function s(t){await n.delete(a,t),i.value=i.value.filter(e=>e.id!==t)}async function o(t){const e=i.value.findIndex(p=>p.id===t);if(e===-1)return;i.value[e].isActive=!i.value[e].isActive;const l=JSON.parse(JSON.stringify(i.value[e]));await n.put(a,l)}function d(t,e){return e.isActive?e.type==="percentage"?Math.round(t*(1-e.discount/100)):e.type==="unifiedPrice"?e.discount:t:t}return{offers:i,createEmptyOffer:u,load:r,addOffer:c,updateOffer:f,deleteOffer:s,toggleOfferActive:o,calculatePrice:d}});export{w as u};
