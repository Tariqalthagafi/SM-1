import{a as _,g as $,c as d,b as t,w,v as V,h as E,o as l,_ as S,r as x,i as C,t as y,F as k,j as g,e as p,u as v,k as h,l as I}from"./index-ffCe8qSf.js";import{u as f}from"./sections-pq2AS_Pn.js";import{d as U}from"./vuedraggable.umd-BNcybpZs.js";import"./indexedDBService-9HYV5ySC.js";const D={class:"section-editor-card"},N=_({__name:"SectionEditor",setup(u){const s=f(),i=$({name:""});function o(){const e=i.name.trim();if(!e)return;if(s.sections.find(m=>m.name===e)){alert("⚠️ القسم موجود مسبقًا");return}const a={id:crypto.randomUUID(),name:e,isActive:!0};s.add(a),i.name=""}return(e,n)=>(l(),d("section",D,[n[2]||(n[2]=t("h2",{class:"card-title"},"➕ إضافة قسم جديد",-1)),t("form",{onSubmit:E(o,["prevent"]),class:"form-row"},[w(t("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>i.name=a),type:"text",placeholder:"ادخل اسم القسم ثم إضافه",required:"",name:"section-name",id:"section-name"},null,512),[[V,i.name]]),n[1]||(n[1]=t("button",{type:"submit",class:"add-btn"},"إضافة",-1))],32)]))}}),B=S(N,[["__scopeId","data-v-0bdb091d"]]),M={class:"list-item"},A={class:"drag-handle",title:"اسحب لإعادة الترتيب"},F={class:"priority-number"},K={class:"section-name"},L={class:"actions"},T=_({__name:"SectionItem",props:{section:{},index:{}},emits:["delete"],setup(u){const s=u,i=f(),o=x(!1),e=x(s.section.name);function n(){e.value=s.section.name,o.value=!0}function a(){const c=e.value.trim();c&&(i.update({...s.section,name:c}),o.value=!1)}function m(){e.value=s.section.name,o.value=!1}return(c,r)=>(l(),d("li",M,[t("span",A,[r[2]||(r[2]=C(" ↕️ ",-1)),t("small",F,y(c.index+1),1)]),o.value?(l(),d(k,{key:0},[w(t("input",{"onUpdate:modelValue":r[0]||(r[0]=b=>e.value=b),type:"text",class:"edit-input",onKeyup:[g(a,["enter"]),g(m,["esc"])]},null,544),[[V,e.value]]),t("div",{class:"actions"},[t("button",{onClick:a,title:"حفظ"},"💾"),t("button",{onClick:m,title:"إلغاء"},"❌")])],64)):(l(),d(k,{key:1},[t("span",K,y(c.section.name),1),t("div",L,[t("button",{onClick:n,title:"تعديل"},"✏️"),t("button",{onClick:r[1]||(r[1]=b=>c.$emit("delete",c.section.id))},"🗑️")])],64))]))}}),j=S(T,[["__scopeId","data-v-b3a20935"]]),q={class:"section-list-card"},z=_({__name:"SectionList",setup(u){const s=f();function i(o){s.remove(o)}return(o,e)=>(l(),d("section",q,[e[2]||(e[2]=t("h2",{class:"card-title"},"📦 قائمة الأقسام",-1)),p(v(U),{modelValue:v(s).sections,"onUpdate:modelValue":e[0]||(e[0]=n=>v(s).sections=n),"item-key":"id",class:"section-list",handle:".drag-handle"},{header:h(()=>e[1]||(e[1]=[t("div",{class:"list-header"},"↕️ اسحب لإعادة ترتيب الأقسام",-1)])),item:h(({element:n,index:a})=>[p(j,{section:n,index:a,onDelete:i},null,8,["section","index"])]),_:1},8,["modelValue"])]))}}),G=S(z,[["__scopeId","data-v-b274f983"]]),H={class:"sections-wrapper"},R=_({__name:"Sections",setup(u){const s=f();return I(()=>{s.load()}),(i,o)=>(l(),d("div",H,[p(B),p(G)]))}});export{R as default};
