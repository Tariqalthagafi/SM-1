import{u as E}from"./offers-BDDfGzaC.js";import{a as O,r as _,f as T,n as x,c as o,b as s,m as V,w as f,t as d,v as c,U as S,o as l,_ as g,l as I,e as b,F as w,p as N,u as A,q as B,V as F}from"./index-ffCe8qSf.js";import"./indexedDBService-9HYV5ySC.js";const L={class:"offer-editor"},M={class:"form-group"},q={key:0},z={class:"form-group"},P={key:0},j={class:"form-group"},G={key:0},H={class:"form-group"},J={key:0},K={class:"form-group"},Q={key:0},R={class:"form-group"},W={key:0},X={class:"form-group"},Y={key:0},Z={key:0,class:"action-buttons"},h=O({__name:"OfferEditor",props:{edit:{},mode:{}},emits:["save","cancel"],setup(y,{emit:i}){const a=y,p=i,t=_({...a.edit}),u=T(()=>a.mode==="view");return x(()=>a.edit,m=>{t.value={...m}}),(m,e)=>(l(),o("div",L,[s("div",M,[e[9]||(e[9]=s("label",null,"اسم العرض",-1)),u.value?(l(),o("span",q,d(t.value.title||"—"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value.title=n),required:""},null,512)),[[c,t.value.title]])]),s("div",z,[e[11]||(e[11]=s("label",null,"نوع العرض",-1)),u.value?(l(),o("span",P,d(t.value.type==="percentage"?"نسبة مئوية":"سعر موحد"),1)):f((l(),o("select",{key:1,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.type=n)},e[10]||(e[10]=[s("option",{value:"percentage"},"نسبة مئوية",-1),s("option",{value:"unifiedPrice"},"سعر موحد",-1)]),512)),[[S,t.value.type]])]),s("div",j,[s("label",null,d(t.value.type==="percentage"?"قيمة الخصم":"السعر الموحد"),1),u.value?(l(),o("span",G,d(t.value.discount)+" "+d(t.value.type==="percentage"?"%":"ريال"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[2]||(e[2]=n=>t.value.discount=n),type:"number",min:"0"},null,512)),[[c,t.value.discount,void 0,{number:!0}]])]),s("div",H,[e[12]||(e[12]=s("label",null,"تاريخ البداية",-1)),u.value?(l(),o("span",J,d(t.value.startDate||"—"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[3]||(e[3]=n=>t.value.startDate=n),type:"date"},null,512)),[[c,t.value.startDate]])]),s("div",K,[e[13]||(e[13]=s("label",null,"تاريخ النهاية",-1)),u.value?(l(),o("span",Q,d(t.value.endDate||"—"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[4]||(e[4]=n=>t.value.endDate=n),type:"date"},null,512)),[[c,t.value.endDate]])]),s("div",R,[e[14]||(e[14]=s("label",null,"وقت البداية",-1)),u.value?(l(),o("span",W,d(t.value.startTime||"—"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[5]||(e[5]=n=>t.value.startTime=n),type:"time"},null,512)),[[c,t.value.startTime]])]),s("div",X,[e[15]||(e[15]=s("label",null,"وقت النهاية",-1)),u.value?(l(),o("span",Y,d(t.value.endTime||"—"),1)):f((l(),o("input",{key:1,"onUpdate:modelValue":e[6]||(e[6]=n=>t.value.endTime=n),type:"time"},null,512)),[[c,t.value.endTime]])]),u.value?V("",!0):(l(),o("div",Z,[s("button",{onClick:e[7]||(e[7]=n=>p("save",{...t.value}))},"💾 حفظ"),s("button",{onClick:e[8]||(e[8]=n=>p("cancel"))},"❌ إلغاء")]))]))}}),k=g(h,[["__scopeId","data-v-29de7406"]]),ee={class:"offer-list"},te={key:0,class:"offer-row"},se={class:"row-actions"},le=["onClick"],oe=["onClick"],ne=["onClick"],ae=O({__name:"OfferList",setup(y){const i=E(),a=_(null),p=_(!1),t=_(i.createEmptyOffer());I(()=>{i.load()});function u(){t.value=i.createEmptyOffer(),a.value=null,p.value=!0}function m(r){a.value=r.id,p.value=!1}function e(){a.value=null,p.value=!1,t.value=i.createEmptyOffer()}function n(r){if(a.value)i.updateOffer(a.value,r);else{const C={...r,id:crypto.randomUUID()};i.addOffer(C)}e()}function U(r){i.deleteOffer(r)}function D(r){i.toggleOfferActive(r)}return(r,C)=>(l(),o("section",ee,[s("button",{class:"add-button",onClick:u},"➕ إضافة عرض جديد"),!a.value&&p.value?(l(),o("div",te,[b(k,{edit:t.value,mode:"add",onSave:n,onCancel:e},null,8,["edit"])])):V("",!0),(l(!0),o(w,null,N(A(i).offers,v=>(l(),o("div",{key:v.id,class:"offer-row"},[a.value===v.id?(l(),B(k,{key:0,edit:v,mode:"edit",onSave:n,onCancel:e},null,8,["edit"])):(l(),o(w,{key:1},[b(k,{edit:v,mode:"view"},null,8,["edit"]),s("div",se,[s("button",{onClick:$=>m(v)},"✏️ ",8,le),s("button",{onClick:$=>U(v.id)},"🗑️ ",8,oe),s("button",{onClick:$=>D(v.id),class:F(v.isActive?"btn-disable":"btn-enable")},d(v.isActive?"🔕 تعطيل":"🔔 تفعيل"),11,ne)])],64))]))),128))]))}}),ie=g(ae,[["__scopeId","data-v-14f2818d"]]),ue={class:"offers-page"},de=O({__name:"Offers",setup(y){return(i,a)=>(l(),o("div",ue,[a[0]||(a[0]=s("h2",null,"📦 إدارة العروض",-1)),b(ie)]))}}),fe=g(de,[["__scopeId","data-v-0c168edd"]]);export{fe as default};
